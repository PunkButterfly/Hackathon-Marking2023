# Система предиктивной аналитики рынка

## Концепция 
В рамках хакатона MARKING HACK команда Punk Butterfly разработала сервис, взаимодействующий с системой маркировки "ЧЕСТНЫЙ ЗНАК", с помощью которого государтсво может выявлять потенциально подозрительных на мошенничество точек продажи, выявлять монополии среди поставщиков, а так же регионы, в которы потенциально может возникнуть дефицит на товары.

## Описание алгоритмов 

### Аналитика показателей дистрибьютеров

ССЫЛКА НА ВКЛАДКУ

### Индекс Хиршмана-Херфиндаля
Мы использовали индекс Хиршмана-Херфиндаля для поиска монополий среди поставщиков. 

ССЫЛКА НА ВКЛАДКУ

### Прогнозирование спроса по регионам в разрезе gtin
Когда возникает локальный дефицит товара, государство заинтересовано в предотвращении этого дефицита, поэтому ему (государству) выгоднуо привлекать производителей товара в регион, где ожидается резкий скачек роста на спрос по товару (группе товаров). 

Для предотвращения дефицита мы разработали систему прогнозирования спроса на конкретный gtin в конкретном регионе. В качестве модели используется нейронная сесть LSTM, обучающаяся на данных о спросе, для каждой уникальной пары (gtin, reg_id), а затем моедль считает пресдказания спроса на 12 недель вперед. В рамках хакатона для увелечения скорости вычислений мы решили взять только 100 уникальных gtin, самых популярных (по спросу).

В системе можно увидеть карту регионов, на которой, при вводе gtin подсвечиваются регионы с максимальным введеной нами **метрикой**. Пусть
* __predicted_window_max__ -- максимальное значение известного спроса за последние 12 недель
* __previous_window_max__ -- максимальное значение предсказанного спроса за следующие 12 недель.

Тогда **метрика** вводится как 
```(predicted_window_max - previous_window_max)/previous_window_max```

Чем **больше** это значение, тем более резкий скачек роста спроса на товар может произойти в регионе. 

Данная разработка может помочь государству выделить регионы, в которые стоит привлечь поставщиков конкретных товаров. Для привлечения можно использовать какие-либо льготы, по типу освобождения от налогов и пр.

ССЫЛКА НА ВКЛАДКУ

### Прогнозирование спроса и поставок товаров в стране
Также мы разработали систему одновременного предсказания ввода товара в оборот и вывода товара из оборота относительно всей страны (без деления по регионам).

Для этого так же использовались сети LSTM.

Для каждого gtin строится график с предсказаниями ввода и вывода товара на 60 дней вперед. Для оценки снова была введена метрика. Пусть 
* __last_predicted_enty_cumsum__ -- последнее предсказанное значение количества введеного товара.
* __last_predicted_sold_cumsum__ -- последнее предсказанное значение количество выведенного из оборота товара

Тогда мeтрика считается как ```(last_predicted_enty_cumsum - last_predicted_sold_cumsum)/last_predicted_enty_cumsum```

Метрика показывает насколько процентов предсказанный вывод товара из оборота меньше ввода в оборот. Чем ниже процент, тем больше в стране требуется конкретного товара (отрицательный процент означаеет, что вывод товара превысит поставки). 

ССЫЛКА НА ВКЛАДКУ

## Развернутый прототип 

## Исходный код
Исходный код веб-сервиса, обработки данных и построения предиктов моделями находится в [github-репозитории](https://github.com/PunkButterfly/Hackathon-MarkingHack).
